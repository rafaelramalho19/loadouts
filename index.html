<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raising Warzone Loadouts</title>
    <meta name="description" content="Loadout list for twitch.tv/raisingz">
    <meta name="og:image" content="https://i.imgur.com/mpVR7I9.jpg">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
</head>
<link rel="stylesheet" href="style.css">

<body>
    <header>
        <a class='twitch' href="https://twitch.tv/raisingz"><img src="./twitch.svg"/> twitch.tv/raisingz</a>
        <form action="https://www.paypal.com/donate" method="post" target="_top">
            <input type="hidden" name="hosted_button_id" value="26W8W24EQF5W6" />
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
            <img alt="" border="0" src="https://www.paypal.com/en_PT/i/scr/pixel.gif" width="1" height="1" />
        </form>

    </header>
    <div class="titles">
        <h2>Cold War</h2>
        <h2>Modern Warfare</h2>
    </div>

    <div class="weapons">
        <div class="cold-war">
            <div class="weapon">
                <h3>FFAR</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/798996667935883284/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>DMR</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/809612004582883349/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Stoner 65</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/800107458181726268/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>M16</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/800918799670050856/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Groza</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/812049940960116746/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>MAC10</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/799492095924371516/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>LW3 Tundra</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/801258931611369492/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>M82</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/810936344615976990/unknown.png" alt="" />
            </div>
            <div class="weapon">
                <h3>Diamatti</h3>
                <img src="https://snipboard.io/02jh3J.jpg" alt="">
            </div>
        </div>

        <div class="warfare">
            <div class="weapon">
                <h3>Amax</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798997228311937094/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Kilo</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798994467003695184/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Ram7</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798994158647246909/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Grau</h3>
                <img src="https://media.discordapp.net/attachments/798993285213061151/808515741959061514/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>FAL</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798994812622602250/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>ASVAL</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/804491784780251186/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>MP5</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798994980848402473/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>R9</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995094933078046/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Kar98</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798998238635098113/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Crossbow</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995235240804396/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>HDR</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995413780004914/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>AX-50</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995584551354378/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>X-16</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995800063082547/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>M19</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798995960822759465/unknown.png" alt="">
            </div>
            <div class="weapon">
                <h3>Renetti</h3>
                <img src="https://cdn.discordapp.com/attachments/798993285213061151/798996089541886002/unknown.png" alt="">
            </div>
        </div>
    </div>

    <div id="overlay" hidden>
        <img src="" alt="">
        <button id="close-overlay">X</button>
    </div>

    <script>
        const overlayElement = document.querySelector('#overlay');
        const image = overlayElement.querySelector('img');

        const urlParams = new URLSearchParams(window.location.search);
        const activeWeapon = decodeURIComponent(urlParams.get('gun'));

        console.log(activeWeapon)

        if(activeWeapon !== 'null' && !!activeWeapon) {
            overlayElement.removeAttribute('hidden')
            const activeElement = Array.from(document.querySelectorAll('h3')).filter(x => x.textContent === activeWeapon)
            image.setAttribute('src', activeElement[0].parentNode.querySelector('img').src)
        }

        document.querySelectorAll('.weapons img').forEach(el => el.addEventListener('click', (ev) => {
            overlayElement.removeAttribute('hidden')
            image.setAttribute('src', ev.currentTarget.src)
            const weaponName = ev.currentTarget.parentNode.querySelector('h3').textContent
            window.history.pushState(null, null, `?gun=${encodeURIComponent(weaponName)}`)
        }));

        document.querySelector('#close-overlay').addEventListener('click', () => {
            overlayElement.setAttribute('hidden', true)
            window.history.replaceState({}, document.title, window.location.protocol + "//" + window.location.host + window.location.pathname);
        })

        document.addEventListener('keydown', (ev) => {
            if(ev.code !== 'Escape') return;

            overlayElement.setAttribute('hidden', true)
            window.history.replaceState({}, document.title, window.location.protocol + "//" + window.location.host + window.location.pathname); 
        })
    </script>
</body>

</html>
